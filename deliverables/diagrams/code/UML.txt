@startuml

title Data Store - Components Diagram

package "it.polimi.ds.client" {
  [ClientMain]
  [Client]
}

package "it.polimi.ds.message" {
  [AppendLogMessage]
  [ClientMessage]
  [Disconnection]
  [LogsRequestMessage]
  [LogsResponseMessage]
  [Ping]
  [ReadRequest]
  [ServerToClientMessage]
  [ServerToClientResponseMessage]
  [ServerToServerMessage]
  [WriteRequest]

  [AppendLogMessage] -[hidden]down-> [ClientMessage]
  [Disconnection] -[hidden]down-> [LogsRequestMessage]
}

package "it.polimi.ds.server" {
  [ServerMain]
  [Server]
  [ClientHandler]
}

package "it.polimi.ds.database" {
  [Database]
}

package "it.polimi.ds.model" {
  [Log]
  [TimeVector]
}

' Relationships and dependencies
[ClientMain] --> [Client] : creates
[ServerMain] --> [Server] : creates
[Server] --> [ClientHandler] : uses

[Client] --> [message] : sends/receives
[Server] --> [message] : sends/receives
[ClientHandler] --> [Client] : communicates
[message] --> [model] : contains data

[Server] --> [Database] : stores/retrieves data
[Server] --> [Log] : stores
[Server] --> [TimeVector] : has
[Log] --> [TimeVector] : contains

' Inheritance relationships
[AppendLogMessage] -|> [ServerToServerMessage] : extends
[LogsRequestMessage] -|> [ServerToServerMessage] : extends
[LogsResponseMessage] -|> [ServerToServerMessage] : extends
[ReadRequest] -|> [ClientMessage] : extends
[WriteRequest] -|> [ClientMessage] : extends
[ServerToClientResponseMessage] -|> [ServerToClientMessage] : extends

@enduml
