title Write Request

Client->Server: WriteRequest(key, value)
Server->Server: vectorClock.increment(serverId)
Server->Server: Log log = new Log(vectorClock, serverId, key, value)
Server->Server: executeWrite(log)


alt success
  Client<--Server: ServerToClientResponseMessage("success")
  Server->Other Servers: AppendLogMessage(log)
   
  alt  log.vectorClock.lessOrEqual(vectorClock)]
    Other Servers->Other Servers: return
  end
  
  alt log.vectorClock.happensBefore(this.vectorClock, senderId)
  Other Servers->Other Servers: executeWrite(log)
  Other Servers->Other Servers: this.vectorClok.merge(log.vectorClock, this.serverId)
  Other Servers->Other Servers: setBufferReady(true)
  Other Servers->Other Servers: this.vectorClock.notify()
  else else
  Other Servers->Other Servers: addToUpdatesBuffer(log)
  end
  
else SQLException | ImpossibleComparisonException
  Client<--Server: ServerToClientResponseMessage("error")
end
