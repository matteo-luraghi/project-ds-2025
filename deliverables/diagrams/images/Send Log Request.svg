<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1546.2011233448147" height="1079.118380182818"><desc>title%20Send%20Log%20Request%0A%0A%5B-%3EServer%3A%20sendLogRequest%0AServer-%3E%20Database%3A%20getLastLog()%0ADatabase-%3EServer%3A%20lastLog%0AServer-%3E%20Other%20Servers%3A%20LogRequestMessage(lastLog%2CserverId)%0Aalt%20serverId%20%3D%3D%20this.serverId%0A%20%20note%20over%20Other%20Servers%3A%20ignore%20msg%20from%20server%20it%20self%0A%20%20Other%20Servers-%3EOther%20Servers%3A%20return%0Aelse%20%20message%20is%20from%20another%20server%0A%20%20Other%20Servers-%3E%20Database%201%3A%20getFollowingLogs(lastLog)%0Aend%0Aloop%20log%20in%20database%0A%20%20alt%20%0A%20%20note%20over%20Other%20Database%3A%20at%20least%20one%20clock%20of%20log%20is%20greater%20than%20the%20correspondig%20clock%20of%20lastLog.vector%20%0A%20%20Other%20Database%20-%3E%20Other%20Database%3A%20addToResult(log)%0A%20%20end%0A%20%20Other%20Database%20-%3E%20Other%20Servers%3A%20result%0Aend%0Aloop%20%20log%20in%20result%0A%20%20Other%20Servers%20-%3E%20Other%20Servers%20%3AsendMulticastMessage(new%20AppendLogMessage(log))%0Aend</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1546" height="1079"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 166.51147660804034 95.73914152281817 L 166.51147660804034 1079.118380182818" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 319.3167415711914 95.73914152281817 L 319.3167415711914 1079.118380182818" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 472.12200653434246 95.73914152281817 L 472.12200653434246 1079.118380182818" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 887.2384107980795 95.73914152281817 L 887.2384107980795 1079.118380182818" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1208.5521654214472 95.73914152281817 L 1208.5521654214472 1079.118380182818" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 126.7544482028333 51.63409261281818 L 206.26850501324736 51.63409261281818 L 206.26850501324736 95.73914152281817 L 126.7544482028333 95.73914152281817 L 126.7544482028333 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="144.4781437833333" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Server</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 269.15138034127733 51.63409261281818 L 369.4821028011055 51.63409261281818 L 369.4821028011055 95.73914152281817 L 269.15138034127733 95.73914152281817 L 269.15138034127733 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="286.87507592177735" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Database</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 406.92331247972135 51.63409261281818 L 537.3207005889635 51.63409261281818 L 537.3207005889635 95.73914152281817 L 406.92331247972135 95.73914152281817 L 406.92331247972135 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="424.64700806022137" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Other Servers</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 830.9897136917006 51.63409261281818 L 943.4871079044584 51.63409261281818 L 943.4871079044584 95.73914152281817 L 830.9897136917006 95.73914152281817 L 830.9897136917006 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="848.7134092722006" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Database 1</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1136.4534698409473 51.63409261281818 L 1280.6508610019473 51.63409261281818 L 1280.6508610019473 95.73914152281817 L 1136.4534698409473 95.73914152281817 L 1136.4534698409473 51.63409261281818 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1154.1771654214472" y="79.40393822281817" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Other Database</text></g></g><g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16pt" font-style="normal" font-weight="normal" text-decoration="normal" x="683.3999996185303" y="24.651306798181814" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Send Log Request</text></g><g><rect fill="white" stroke="none" x="27.49759222166665" y="128.4095481228182" width="119.68389381470703" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="29.94787271666665" y="143.1112310928182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sendLogRequest</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 8.16760165 149.64531241281819 L 153.06215922437366 149.64531241281819" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(166.51147660804034,149.64531241281819) translate(-166.51147660804034,-149.64531241281819)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 152.89880719137366 142.83897770448485 L 166.51147660804034 149.64531241281819 L 152.89880719137366 156.45164712115152 Z"/></g></g><g><rect fill="white" stroke="none" x="197.94716218226236" y="174.1481173628182" width="89.93389381470703" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="200.39744267726235" y="188.84980033281818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">getLastLog()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 166.51147660804034 195.3838816528182 L 305.86742418752476 195.3838816528182" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(319.3167415711914,195.3838816528182) translate(-319.3167415711914,-195.3838816528182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 305.70407215452474 188.57754694448485 L 319.3167415711914 195.3838816528182 L 305.70407215452474 202.19021636115153 Z"/></g></g><g><rect fill="white" stroke="none" x="215.55549576990884" y="219.8866866028182" width="54.717226639414065" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="218.00577626490883" y="234.58836957281818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">lastLog</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 319.3167415711914 241.1224508928182 L 179.96079399170702 241.1224508928182" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(166.51147660804034,241.1224508928182) translate(-166.51147660804034,-241.1224508928182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 180.12414602470702 234.31611618448486 L 166.51147660804034 241.1224508928182 L 180.12414602470702 247.92878560115153 Z"/></g></g><g><rect fill="white" stroke="none" x="185.84146717970705" y="265.62525584281815" width="266.9505487829687" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="188.29174767470704" y="280.3269388128181" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">LogRequestMessage(lastLog,serverId)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 166.51147660804034 286.86102013281817 L 458.6726891506758 286.86102013281817" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(472.12200653434246,286.86102013281817) translate(-472.12200653434246,-286.86102013281817)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 458.5093371176758 280.05468542448483 L 472.12200653434246 286.86102013281817 L 458.5093371176758 293.6673548411515 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 347.8027230587516 355.46887399281815 L 581.7396070399333 355.46887399281815 L 596.4412900099333 370.1705569628181 L 596.4412900099333 393.03984158281816 L 347.8027230587516 393.03984158281816 Z" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 581.7396070399333 355.46887399281815 L 581.7396070399333 370.1705569628181 L 596.4412900099333 370.1705569628181" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="370.67200767875164" y="378.3381586128181" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ignore msg from server it self</text></g><g><rect fill="white" stroke="none" x="491.4519971060091" y="417.5426465328182" width="48.33389534058594" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="493.90227760100913" y="432.2443295028182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">return</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 472.12200653434246 438.77841082281816 L 537.4628197343425 438.77841082281816 L 537.4628197343425 460.0141751128182 L 485.5713239180091 460.0141751128182" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(472.12200653434246,460.0141751128182) translate(-472.12200653434246,-460.0141751128182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 485.73467595100914 453.20784040448484 L 472.12200653434246 460.0141751128182 L 485.73467595100914 466.8205098211515 Z"/></g></g><g><rect fill="white" stroke="none" x="587.4299251194532" y="528.6220289728182" width="184.50056709351563" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="589.8802056144532" y="543.3237119428181" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">getFollowingLogs(lastLog)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 472.12200653434246 549.8577932628182 L 873.7890934144128 549.8577932628182" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(887.2384107980795,549.8577932628182) translate(-887.2384107980795,-549.8577932628182)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 873.6257413814128 543.0514585544848 L 887.2384107980795 549.8577932628182 L 873.6257413814128 556.6641279711515 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 911.7412157480796 687.0735009828181 L 1490.6614321248148 687.0735009828181 L 1505.363115094815 701.7751839528181 L 1505.363115094815 724.6444685728181 L 911.7412157480796 724.6444685728181 Z" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1490.6614321248148 687.0735009828181 L 1490.6614321248148 701.7751839528181 L 1505.363115094815 701.7751839528181" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="934.6105003680796" y="709.9427856028182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">at least one clock of log is greater than the correspondig clock of lastLog.vector </text></g><g><rect fill="white" stroke="none" x="1227.8821559931139" y="749.1472735228181" width="120.0005594641211" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1230.332436488114" y="763.848956492818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">addToResult(log)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1208.5521654214472 770.3830378128181 L 1273.8929786214471 770.3830378128181 L 1273.8929786214471 791.6188021028181 L 1222.001482805114 791.6188021028181" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(1208.5521654214472,791.6188021028181) translate(-1208.5521654214472,-791.6188021028181)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1222.1648348381138 784.8124673944848 L 1208.5521654214472 791.6188021028181 L 1222.1648348381138 798.4251368111514 Z"/></g></g><g><rect fill="white" stroke="none" x="818.320137926132" y="840.6244120028181" width="44.03389610352539" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="820.770418421132" y="855.326094972818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">result</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1208.5521654214472 861.8601762928181 L 485.5713239180091 861.8601762928181" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(472.12200653434246,861.8601762928181) translate(-472.12200653434246,-861.8601762928181)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 485.73467595100914 855.0538415844848 L 472.12200653434246 861.8601762928181 L 485.73467595100914 868.6665110011514 Z"/></g></g><g><rect fill="white" stroke="none" x="491.4519971060091" y="954.970835102818" width="373.73390449585935" height="21.23576429"/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="493.90227760100913" y="969.672518072818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sendMulticastMessage(new AppendLogMessage(log))</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 472.12200653434246 976.206599392818 L 537.4628197343425 976.206599392818 L 537.4628197343425 997.442363682818 L 485.5713239180091 997.442363682818" stroke-miterlimit="10" stroke-width="1.3612669416666667"/><g transform="translate(472.12200653434246,997.442363682818) translate(-472.12200653434246,-997.442363682818)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 485.73467595100914 990.6360289744847 L 472.12200653434246 997.442363682818 L 485.73467595100914 1004.2486983911514 Z"/></g></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 339.6351214087516 311.36382508281815 L 944.4116223480795 311.36382508281815 L 944.4116223480795 574.3605982128182 L 339.6351214087516 574.3605982128182 L 339.6351214087516 311.36382508281815 Z" stroke-miterlimit="10" stroke-width="2.3336004714285714"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 339.6351214087516 311.36382508281815 L 339.6351214087516 330.96606904281816 L 387.93886121492835 330.96606904281816 L 397.73998319492836 321.16494706281816 L 397.73998319492836 311.36382508281815 L 339.6351214087516 311.36382508281815" stroke-miterlimit="10" stroke-width="2.3336004714285714"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="355.9703247087516" y="324.4319877228182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="411.62490599992833" y="312.6706413468182" width="155.95056404175781" height="16.988611432000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="414.07518649492835" y="324.4319877228182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[serverId == this.serverId]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 339.6351214087516 484.51698006281816 L 944.4116223480795 484.51698006281816" stroke-miterlimit="10" stroke-width="2.3336004714285714" stroke-dasharray="4.083800825"/></g><g/><g><rect fill="white" stroke="none" x="411.62490599992833" y="485.8237963268182" width="198.5672327429297" height="16.988611432000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="414.07518649492835" y="497.5851427028182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[message is from another server]</text></g><g/><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 414.94879498434244 598.8634031628181 L 1529.8659200448146 598.8634031628181 L 1529.8659200448146 886.3629812428181 L 414.94879498434244 886.3629812428181 L 414.94879498434244 598.8634031628181 Z" stroke-miterlimit="10" stroke-width="2.3336004714285714"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 414.94879498434244 598.8634031628181 L 414.94879498434244 618.4656471228182 L 473.2525347905192 618.4656471228182 L 483.0536567705192 608.6645251428181 L 483.0536567705192 598.8634031628181 L 414.94879498434244 598.8634031628181" stroke-miterlimit="10" stroke-width="2.3336004714285714"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="431.28399828434243" y="611.9315658028181" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">loop</text><g><rect fill="white" stroke="none" x="496.93857957551916" y="600.1702194268181" width="102.18389381470703" height="16.988611432000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="499.3888600705192" y="611.9315658028181" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[log in database]</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 903.5736140980796 642.9684520728182 L 1513.5307167448148 642.9684520728182 L 1513.5307167448148 816.1216070528181 L 903.5736140980796 816.1216070528181 L 903.5736140980796 642.9684520728182 Z" stroke-miterlimit="10" stroke-width="2.3336004714285714"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 903.5736140980796 642.9684520728182 L 903.5736140980796 662.5706960328182 L 951.8773539042563 662.5706960328182 L 961.6784758842563 652.7695740528181 L 961.6784758842563 642.9684520728182 L 903.5736140980796 642.9684520728182" stroke-miterlimit="10" stroke-width="2.3336004714285714"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="919.9088173980796" y="656.0366147128182" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 414.94879498434244 910.8657861928181 L 870.9032074980794 910.8657861928181 L 870.9032074980794 1021.9451686328181 L 414.94879498434244 1021.9451686328181 L 414.94879498434244 910.8657861928181 Z" stroke-miterlimit="10" stroke-width="2.3336004714285714"/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 414.94879498434244 910.8657861928181 L 414.94879498434244 930.4680301528181 L 473.2525347905192 930.4680301528181 L 483.0536567705192 920.666908172818 L 483.0536567705192 910.8657861928181 L 414.94879498434244 910.8657861928181" stroke-miterlimit="10" stroke-width="2.3336004714285714"/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="431.28399828434243" y="923.933948832818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">loop</text><g><rect fill="white" stroke="none" x="496.93857957551916" y="912.172602456818" width="82.36722816529297" height="16.988611432000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="499.3888600705192" y="923.933948832818" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[log in result]</text></g></g><g/><g/><g/><g/><g/></g></svg>